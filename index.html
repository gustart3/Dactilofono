<!DOCTYPE html>
<html lang="es">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Teclado Musical</title>
    <style>
      body {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
  font-family: Arial, sans-serif;
  background-color: #f0f0f0;
  padding: 0 10px;
}

.note-display {
  font-size: 24px;
  margin-bottom: 30px;
  height: 30px;
}

.keyboard {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
  grid-gap: 10px;
  width: 100%;
  max-width: 1000px; /* Ajusta según el diseño deseado */
  padding: 10px;
  box-sizing: border-box;
}

.key, .keyN {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 10vw; /* Ajustar según el diseño deseado */
  height: 10vw; /* Mantener la proporción circular */
  background: lightblue;
  text-align: center;
  line-height: 10vw; /* Alineación vertical del texto */
  border-radius: 50%; /* Hace las teclas redondas */
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  transition: background 0.2s;
  font-size: 1.5em;
}

.keyN {
  background: rgb(220, 118, 51);
}

.key:active, .keyN:active {
  background: darkblue;
  color: white;
}

.volume-slider, .transpose-slider {
  margin-top: 20px;
  width: 100%;
  max-width: 300px;
}

.volume-slider {
  margin-bottom: 20px;
}

/* Nueva posición de las filas */
.row1 {
  grid-row: 1;
}

.row2 {
  grid-row: 2;
  position: relative;
  left: 30px; /* Desplazar a la derecha */
}

.row3 {
  grid-row: 3;
  position: relative;
  left: 60px; /* Desplazar a la derecha más */
}
    </style>
  </head>
  <body>
    <div class="note-display" id="noteDisplay"></div>
    <div class="volume-control">
      <label for="volumeSlider">Volumen:</label>
      <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.5">
    </div>
    <div class="keyboard">
      <div class="row1 key" data-note="Q">Q</div>
      <div class="row1 key" data-note="W">W</div>
      <div class="row1 key" data-note="E">E</div>
      <div class="row1 key" data-note="R">R</div>
      <div class="row1 key" data-note="T">T</div>
      <div class="row1 key" data-note="Y">Y</div>
      <div class="row1 key" data-note="U">U</div>
      <div class="row1 key" data-note="I">I</div>
      <div class="row1 key" data-note="O">O</div>
      <div class="row1 keyN" data-note="P">P</div>
      

      <div class="row2 key" data-note="A">A</div>
      <div class="row2 key" data-note="S">S</div>
      <div class="row2 key" data-note="D">D</div>
      <div class="row2 keyN" data-note="F">F</div>
      <div class="row2 key" data-note="G">G</div>
      <div class="row2 key" data-note="H">H</div>
      <div class="row2 key" data-note="J">J</div>
      <div class="row2 keyN" data-note="K">K</div>
      <div class="row2 key" data-note="L">L</div>
      

      <div class="row3 key" data-note="Z">Z</div>
      <div class="row3 key" data-note="X">X</div>
      <div class="row3 key" data-note="C">C</div>
      <div class="row3 key" data-note="V">V</div>
      <div class="row3 key" data-note="B">B</div>
      <div class="row3 key" data-note="N">N</div>
      <div class="row3 key" data-note="M">M</div>
      <div class="row3 key" data-note=",">,</div>
      <div class="row3 key" data-note=".">.</div>
    </div>
    <script>
      const AudioContext = window.AudioContext || window.webkitAudioContext;
      const audioContext = new AudioContext();
      const notes = {
  Z: "C4",
  S: "C#4",
  X: "D4",
  D: "D#4",
  C: "E4",
  V: "F4",
  G: "F#4",
  B: "G4",
  H: "G#4",
  N: "A4",
  J: "A#4",
  M: "B4",
  ",": "C5",
  L: "C#5",
  ".": "D5",
  A: "D#5",
  Q: "E5",
  W: "F5",
  E: "F#5",
  R: "G5",
  T: "G#5",
  Y: "A5",
  U: "A#5",
  I: "B5",
  O: "C6",
};

    /*  const notes = {
        Z: "C6",
        S: "C#6",
        X: "D6",
        D: "D#6",
        C: "E6",
        V: "F6",
        G: "F#6",
        B: "G6",
        H: "G#6",
        N: "A6",
        J: "A#6",
        M: "B6",
        ",": "C7",
        L: "C#7",
        ".": "D7",
        A: "D#7",
        Q: "E7",
        W: "F7",
        E: "F#7",
        R: "G7",
        T: "G#7",
        Y: "A7",
        U: "A#7",
        I: "B7",
        O: "C8",
      };*/

      const frequencies = {
    C4: 261.63,
    "C#4": 277.18,
    D4: 293.66,
    "D#4": 311.13,
    E4: 329.63,
    F4: 349.23,
    "F#4": 369.99,
    G4: 392.00,
    "G#4": 415.30,
    A4: 440.00,
    "A#4": 466.16,
    B4: 493.88,
    C5: 523.25,
    "C#5": 554.37,
    D5: 587.33,
    "D#5": 622.25,
    E5: 659.26,
    F5: 698.46,
    "F#5": 739.99,
    G5: 783.99,
    "G#5": 830.61,
    A5: 880.00,
    "A#5": 932.33,
    B5: 987.77,
    C6: 1046.50,
    "C#6": 1108.73,
    D6: 1174.66,
    "D#6": 1244.51,
    E6: 1318.51,
    F6: 1396.91,
    "F#6": 1480.00,
    G6: 1567.98,
    "G#6": 1661.22,
    A6: 1760.00,
    "A#6": 1864.66,
    B6: 1975.53
};

     /* const frequencies = {
        C6: 1046.5,
        "C#6": 1108.73,
        D6: 1174.66,
        "D#6": 1244.51,
        E6: 1318.51,
        F6: 1396.91,
        "F#6": 1480.0,
        G6: 1567.98,
        "G#6": 1661.22,
        A6: 1760.0,
        "A#6": 1864.66,
        B6: 1975.53,
        C7: 2093.0,
        "C#7": 2217.46,
        D7: 2349.32,
        "D#7": 2489.02,
        E7: 2637.02,
        F7: 2793.83,
        "F#7": 2959.96,
        G7: 3135.96,
        "G#7": 3322.44,
        A7: 3520.0,
        "A#7": 3729.31,
        B7: 3951.07,
        C8: 4186.01,
        "C#8": 4434.92,
        D8: 4698.64,
        "D#8": 4978.03,
        E8: 5274.04,
      };*/

      const activeOscillators = {};
      let gainNode = audioContext.createGain();
      gainNode.gain.value = 0.5; // Valor inicial del volumen
      gainNode.connect(audioContext.destination);

      function playSound(note) {
        const frequency = frequencies[note];
        if (!activeOscillators[note]) {
          const oscillator = audioContext.createOscillator();
          oscillator.type = "sine";
          oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
          oscillator.connect(gainNode);
          oscillator.start();
          activeOscillators[note] = oscillator;
        }
      }

      function stopSound(note) {
        if (activeOscillators[note]) {
          activeOscillators[note].stop();
          delete activeOscillators[note];
        }
      }

      function displayNote(note) {
        const noteDisplay = document.getElementById("noteDisplay");
        noteDisplay.textContent = note;
      }

      document.addEventListener("keydown", (event) => {
        const key = event.key.toUpperCase();
        const note = notes[key];
        if (note) {
          playSound(note);
          displayNote(note);
        }
      });

      document.addEventListener("keyup", (event) => {
        const key = event.key.toUpperCase();
        const note = notes[key];
        if (note) {
          stopSound(note);
          displayNote('');
        }
      });

      document.querySelectorAll(".key").forEach((key) => {
        key.addEventListener("mousedown", () => {
          const keyNote = key.getAttribute("data-note");
          const note = notes[keyNote];
          playSound(note);
          displayNote(note);
        });

        key.addEventListener("mouseup", () => {
          const keyNote = key.getAttribute("data-note");
          const note = notes[keyNote];
          stopSound(note);
          displayNote('');
        });
      });

      document.getElementById("volumeSlider").addEventListener("input", (event) => {
        const volume = event.target.value;
        gainNode.gain.value = volume;
      });

document.querySelectorAll(".key").forEach((key) => {
  key.addEventListener("mousedown", () => handleKeyInteraction(key));
  key.addEventListener("mouseup", () => handleKeyInteraction(key, false));
  key.addEventListener("touchstart", () => handleKeyInteraction(key));
  key.addEventListener("touchend", () => handleKeyInteraction(key, false));
});

function handleKeyInteraction(key, isPressed = true) {
  const keyNote = key.getAttribute("data-note");
  const note = notes[keyNote];
  if (isPressed) {
    playSound(note);
    displayNote(note);
  } else {
    stopSound(note);
    displayNote('');
  }
}
      
    </script>
  </body>
</html>
